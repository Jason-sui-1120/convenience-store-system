import{_ as Z}from"./index-398ba06f.js";import{f as ee}from"./date-6033e12c.js";/* empty css                 *//* empty css               *//* empty css                 */import{r as v,M as U,f as te,l as c,m as x,q as b,G as t,A as a,B as le,z as I,u as T,E as s,X as ae,F as D,W as q,D as oe}from"./vue-vendor-76d6b13b.js";import{a7 as y,Q as ne,a8 as se,a6 as re,a9 as de,aa as ue,ab as ie,Y as E,ac as pe,M as me,ad as ce,ae as _e,af as fe,ag as ge,a5 as ve,ah as be,ai as we,aj as ye,ak as Ve,al as he}from"./element-plus-a4f5b2a7.js";const xe={class:"suppliers-container"},Ee={class:"page-header"},Ce={class:"search-bar"},ke={class:"table-container"},Me={key:0},Se={class:"pagination-container"},Ue={class:"dialog-footer"},Ie={__name:"index",setup(ze){const C=v(!1),k=v([]),_=v(!1),V=v(null),w=v(),f=U({name:"",status:""}),u=U({page:1,limit:20,total:0}),o=U({name:"",contact:"",phone:"",products:[],paymentMethod:"",needInvoice:!1,address:"",notes:"",status:"active"}),A={name:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],products:[{required:!0,message:"请选择供货商品",trigger:"change"}],paymentMethod:[{required:!0,message:"请选择付款方式",trigger:"change"}]},j=v(["矿泉水","饮料","零食","烟酒","日用品","调料","米面油","冷冻食品"]),i=async()=>{C.value=!0;try{await new Promise(n=>setTimeout(n,500)),k.value=[{_id:"1",name:"景田饮用水供应商",contact:"张经理",phone:"13800138001",products:["景田矿泉水","景田纯净水"],paymentMethod:"月结",needInvoice:!0,address:"广东省深圳市",notes:"主要供应景田系列产品",status:"active",createdAt:new Date("2024-01-15")},{_id:"2",name:"百岁山水业",contact:"李总",phone:"13900139002",products:["百岁山矿泉水"],paymentMethod:"银行转账",needInvoice:!0,address:"广东省惠州市",notes:"百岁山官方供应商",status:"active",createdAt:new Date("2024-01-20")}],u.total=k.value.length}catch{y.error("获取供应商列表失败")}finally{C.value=!1}},z=()=>{i()},O=()=>{Object.assign(f,{name:"",status:""}),i()},P=n=>{u.limit=n,i()},R=n=>{u.page=n,i()},$=n=>{V.value=n,Object.assign(o,n),_.value=!0},N=async()=>{if(w.value)try{await w.value.validate(),await new Promise(n=>setTimeout(n,500)),V.value?y.success("供应商更新成功"):y.success("供应商添加成功"),_.value=!1,K(),i()}catch(n){console.error("表单验证失败:",n)}},G=async n=>{try{await pe.confirm("确定要删除这个供应商吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await new Promise(e=>setTimeout(e,500)),y.success("删除成功"),i()}catch(e){e!=="cancel"&&y.error("删除失败")}},K=()=>{Object.assign(o,{name:"",contact:"",phone:"",products:[],paymentMethod:"",needInvoice:!1,address:"",notes:"",status:"active"}),V.value=null,w.value&&w.value.clearValidate()};return te(()=>{i()}),(n,e)=>{const L=me,p=ne,g=ce,r=_e,m=fe,M=ge,B=se,d=ve,S=be,Q=re,W=de,X=we,F=ye,Y=Ve,H=ue,J=ie;return c(),x("div",xe,[b("div",Ee,[e[17]||(e[17]=b("h2",null,"供应商管理",-1)),t(p,{type:"primary",onClick:e[0]||(e[0]=l=>_.value=!0)},{default:a(()=>[t(L,null,{default:a(()=>[t(T(he))]),_:1}),e[16]||(e[16]=s(" 添加供应商 ",-1))]),_:1,__:[16]})]),b("div",Ce,[t(B,{inline:!0,model:f,class:"search-form"},{default:a(()=>[t(r,{label:"供应商名称"},{default:a(()=>[t(g,{modelValue:f.name,"onUpdate:modelValue":e[1]||(e[1]=l=>f.name=l),placeholder:"请输入供应商名称",clearable:"",onKeyup:ae(z,["enter"])},null,8,["modelValue"])]),_:1}),t(r,{label:"状态"},{default:a(()=>[t(M,{modelValue:f.status,"onUpdate:modelValue":e[2]||(e[2]=l=>f.status=l),placeholder:"请选择状态",clearable:""},{default:a(()=>[t(m,{label:"启用",value:"active"}),t(m,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:a(()=>[t(p,{type:"primary",onClick:z},{default:a(()=>e[18]||(e[18]=[s("搜索",-1)])),_:1,__:[18]}),t(p,{onClick:O},{default:a(()=>e[19]||(e[19]=[s("重置",-1)])),_:1,__:[19]})]),_:1})]),_:1},8,["model"])]),b("div",ke,[le((c(),I(Q,{data:k.value,stripe:"",style:{width:"100%"}},{default:a(()=>[t(d,{prop:"name",label:"供应商名称",width:"150"}),t(d,{prop:"contact",label:"联系人",width:"100"}),t(d,{prop:"phone",label:"联系电话",width:"130"}),t(d,{prop:"products",label:"供货商品",width:"200"},{default:a(l=>[(c(!0),x(D,null,q(l.row.products.slice(0,3),h=>(c(),I(S,{key:h,size:"small",style:{"margin-right":"5px"}},{default:a(()=>[s(E(h),1)]),_:2},1024))),128)),l.row.products.length>3?(c(),x("span",Me,"...")):oe("",!0)]),_:1}),t(d,{prop:"paymentMethod",label:"付款方式",width:"100"}),t(d,{prop:"needInvoice",label:"是否开票",width:"80"},{default:a(l=>[t(S,{type:l.row.needInvoice?"success":"info"},{default:a(()=>[s(E(l.row.needInvoice?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"status",label:"状态",width:"80"},{default:a(l=>[t(S,{type:l.row.status==="active"?"success":"danger"},{default:a(()=>[s(E(l.row.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"createdAt",label:"创建时间",width:"150"},{default:a(l=>[s(E(T(ee)(l.row.createdAt)),1)]),_:1}),t(d,{label:"操作",width:"150",fixed:"right"},{default:a(l=>[t(p,{size:"small",onClick:h=>$(l.row)},{default:a(()=>e[20]||(e[20]=[s("编辑",-1)])),_:2,__:[20]},1032,["onClick"]),t(p,{size:"small",type:"danger",onClick:h=>G(l.row._id)},{default:a(()=>e[21]||(e[21]=[s(" 删除 ",-1)])),_:2,__:[21]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,C.value]]),b("div",Se,[t(W,{"current-page":u.page,"onUpdate:currentPage":e[3]||(e[3]=l=>u.page=l),"page-size":u.limit,"onUpdate:pageSize":e[4]||(e[4]=l=>u.limit=l),"page-sizes":[10,20,50,100],total:u.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),t(H,{modelValue:_.value,"onUpdate:modelValue":e[15]||(e[15]=l=>_.value=l),title:V.value?"编辑供应商":"添加供应商",width:"600px"},{footer:a(()=>[b("span",Ue,[t(p,{onClick:e[14]||(e[14]=l=>_.value=!1)},{default:a(()=>e[24]||(e[24]=[s("取消",-1)])),_:1,__:[24]}),t(p,{type:"primary",onClick:N},{default:a(()=>e[25]||(e[25]=[s("确定",-1)])),_:1,__:[25]})])]),default:a(()=>[t(B,{ref_key:"supplierFormRef",ref:w,model:o,rules:A,"label-width":"100px"},{default:a(()=>[t(r,{label:"供应商名称",prop:"name"},{default:a(()=>[t(g,{modelValue:o.name,"onUpdate:modelValue":e[5]||(e[5]=l=>o.name=l),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1}),t(r,{label:"联系人",prop:"contact"},{default:a(()=>[t(g,{modelValue:o.contact,"onUpdate:modelValue":e[6]||(e[6]=l=>o.contact=l),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),t(r,{label:"联系电话",prop:"phone"},{default:a(()=>[t(g,{modelValue:o.phone,"onUpdate:modelValue":e[7]||(e[7]=l=>o.phone=l),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),t(r,{label:"供货商品",prop:"products"},{default:a(()=>[t(M,{modelValue:o.products,"onUpdate:modelValue":e[8]||(e[8]=l=>o.products=l),multiple:"",filterable:"","allow-create":"",placeholder:"请选择或输入供货商品",style:{width:"100%"}},{default:a(()=>[(c(!0),x(D,null,q(j.value,l=>(c(),I(m,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"付款方式",prop:"paymentMethod"},{default:a(()=>[t(M,{modelValue:o.paymentMethod,"onUpdate:modelValue":e[9]||(e[9]=l=>o.paymentMethod=l),placeholder:"请选择付款方式"},{default:a(()=>[t(m,{label:"现金",value:"现金"}),t(m,{label:"银行转账",value:"银行转账"}),t(m,{label:"支票",value:"支票"}),t(m,{label:"月结",value:"月结"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"是否开票"},{default:a(()=>[t(X,{modelValue:o.needInvoice,"onUpdate:modelValue":e[10]||(e[10]=l=>o.needInvoice=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"地址"},{default:a(()=>[t(g,{modelValue:o.address,"onUpdate:modelValue":e[11]||(e[11]=l=>o.address=l),type:"textarea",rows:2,placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),t(r,{label:"备注"},{default:a(()=>[t(g,{modelValue:o.notes,"onUpdate:modelValue":e[12]||(e[12]=l=>o.notes=l),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),t(r,{label:"状态"},{default:a(()=>[t(Y,{modelValue:o.status,"onUpdate:modelValue":e[13]||(e[13]=l=>o.status=l)},{default:a(()=>[t(F,{label:"active"},{default:a(()=>e[22]||(e[22]=[s("启用",-1)])),_:1,__:[22]}),t(F,{label:"inactive"},{default:a(()=>e[23]||(e[23]=[s("禁用",-1)])),_:1,__:[23]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Oe=Z(Ie,[["__scopeId","data-v-1a78f43e"]]);export{Oe as default};
