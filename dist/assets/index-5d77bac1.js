import{_ as H}from"./index-398ba06f.js";import{f as J}from"./date-6033e12c.js";/* empty css                 *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               */import{r as V,M as A,f as W,l as B,m as Z,q as f,G as e,A as a,B as ee,z as le,u as F,E as s,X as ae}from"./vue-vendor-76d6b13b.js";import{a7 as w,Q as te,a8 as oe,a6 as re,a9 as ne,aa as ue,ab as se,Y as y,s as ie,ac as de,M as pe,ad as ce,ae as me,af as _e,ag as fe,a5 as be,ah as ge,a4 as ve,a2 as Ve,am as we,aj as ye,ak as Pe,al as ke}from"./element-plus-a4f5b2a7.js";const Ee={class:"products-container"},Ce={class:"page-header"},xe={class:"search-bar"},Ue={class:"table-container"},Ae={class:"pagination-container"},he={class:"dialog-footer"},Se={__name:"index",setup(ze){const C=V(!1),x=V([]),b=V(!1),P=V(null),v=V(),d=A({name:"",brand:"",category:"",status:""}),p=A({page:1,limit:20,total:0}),o=A({name:"",brand:"",category:"",specification:"",purchasePrice:0,retailPrice:0,stockAlert:10,unit:"",barcode:"",status:"active"}),T={name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],brand:[{required:!0,message:"请输入品牌",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],specification:[{required:!0,message:"请输入规格",trigger:"blur"}],purchasePrice:[{required:!0,message:"请输入采购价",trigger:"blur"}],retailPrice:[{required:!0,message:"请输入零售价",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}]},m=async()=>{C.value=!0;try{await new Promise(n=>setTimeout(n,500)),x.value=[{_id:"1",name:"景田矿泉水",brand:"景田",category:"饮料",specification:"550ml",purchasePrice:1.5,retailPrice:2,currentStock:120,stockAlert:20,unit:"瓶",barcode:"6901234567890",status:"active",createdAt:new Date("2024-01-15")},{_id:"2",name:"百岁山矿泉水",brand:"百岁山",category:"饮料",specification:"570ml",purchasePrice:1.8,retailPrice:2.5,currentStock:8,stockAlert:15,unit:"瓶",barcode:"6901234567891",status:"active",createdAt:new Date("2024-01-20")}],p.total=x.value.length}catch{w.error("获取商品列表失败")}finally{C.value=!1}},h=()=>{m()},q=()=>{Object.assign(d,{name:"",brand:"",category:"",status:""}),m()},D=n=>{p.limit=n,m()},R=n=>{p.page=n,m()},j=n=>{P.value=n,Object.assign(o,n),b.value=!0},I=async()=>{if(v.value)try{await v.value.validate(),await new Promise(n=>setTimeout(n,500)),P.value?w.success("商品更新成功"):w.success("商品添加成功"),b.value=!1,N(),m()}catch(n){console.error("表单验证失败:",n)}},M=async n=>{try{await de.confirm("确定要删除这个商品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await new Promise(l=>setTimeout(l,500)),w.success("删除成功"),m()}catch(l){l!=="cancel"&&w.error("删除失败")}},N=()=>{Object.assign(o,{name:"",brand:"",category:"",specification:"",purchasePrice:0,retailPrice:0,stockAlert:10,unit:"",barcode:"",status:"active"}),P.value=null,v.value&&v.value.clearValidate()};return W(()=>{m()}),(n,l)=>{const O=pe,_=te,g=ce,u=me,r=_e,k=fe,S=oe,i=be,$=ge,G=re,K=ne,c=ve,E=Ve,U=we,z=ye,L=Pe,Q=ue,X=se;return B(),Z("div",Ee,[f("div",Ce,[l[20]||(l[20]=f("h2",null,"商品管理",-1)),e(_,{type:"primary",onClick:l[0]||(l[0]=t=>b.value=!0)},{default:a(()=>[e(O,null,{default:a(()=>[e(F(ke))]),_:1}),l[19]||(l[19]=s(" 添加商品 ",-1))]),_:1,__:[19]})]),f("div",xe,[e(S,{inline:!0,model:d,class:"search-form"},{default:a(()=>[e(u,{label:"商品名称"},{default:a(()=>[e(g,{modelValue:d.name,"onUpdate:modelValue":l[1]||(l[1]=t=>d.name=t),placeholder:"请输入商品名称",clearable:"",onKeyup:ae(h,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"品牌"},{default:a(()=>[e(g,{modelValue:d.brand,"onUpdate:modelValue":l[2]||(l[2]=t=>d.brand=t),placeholder:"请输入品牌",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"分类"},{default:a(()=>[e(k,{modelValue:d.category,"onUpdate:modelValue":l[3]||(l[3]=t=>d.category=t),placeholder:"请选择分类",clearable:""},{default:a(()=>[e(r,{label:"饮料",value:"饮料"}),e(r,{label:"零食",value:"零食"}),e(r,{label:"日用品",value:"日用品"}),e(r,{label:"烟酒",value:"烟酒"}),e(r,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"状态"},{default:a(()=>[e(k,{modelValue:d.status,"onUpdate:modelValue":l[4]||(l[4]=t=>d.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(r,{label:"在售",value:"active"}),e(r,{label:"停售",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:a(()=>[e(_,{type:"primary",onClick:h},{default:a(()=>l[21]||(l[21]=[s("搜索",-1)])),_:1,__:[21]}),e(_,{onClick:q},{default:a(()=>l[22]||(l[22]=[s("重置",-1)])),_:1,__:[22]})]),_:1})]),_:1},8,["model"])]),f("div",Ue,[ee((B(),le(G,{data:x.value,stripe:"",style:{width:"100%"}},{default:a(()=>[e(i,{prop:"name",label:"商品名称",width:"150"}),e(i,{prop:"brand",label:"品牌",width:"100"}),e(i,{prop:"category",label:"分类",width:"80"}),e(i,{prop:"specification",label:"规格",width:"100"}),e(i,{prop:"purchasePrice",label:"采购价",width:"80"},{default:a(t=>[s(" ¥"+y(t.row.purchasePrice.toFixed(2)),1)]),_:1}),e(i,{prop:"retailPrice",label:"零售价",width:"80"},{default:a(t=>[s(" ¥"+y(t.row.retailPrice.toFixed(2)),1)]),_:1}),e(i,{prop:"currentStock",label:"当前库存",width:"80"},{default:a(t=>[f("span",{class:ie({"low-stock":t.row.currentStock<=t.row.stockAlert})},y(t.row.currentStock),3)]),_:1}),e(i,{prop:"stockAlert",label:"预警值",width:"70"}),e(i,{prop:"unit",label:"单位",width:"60"}),e(i,{prop:"status",label:"状态",width:"80"},{default:a(t=>[e($,{type:t.row.status==="active"?"success":"danger"},{default:a(()=>[s(y(t.row.status==="active"?"在售":"停售"),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"createdAt",label:"创建时间",width:"150"},{default:a(t=>[s(y(F(J)(t.row.createdAt)),1)]),_:1}),e(i,{label:"操作",width:"150",fixed:"right"},{default:a(t=>[e(_,{size:"small",onClick:Y=>j(t.row)},{default:a(()=>l[23]||(l[23]=[s("编辑",-1)])),_:2,__:[23]},1032,["onClick"]),e(_,{size:"small",type:"danger",onClick:Y=>M(t.row._id)},{default:a(()=>l[24]||(l[24]=[s(" 删除 ",-1)])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[X,C.value]]),f("div",Ae,[e(K,{"current-page":p.page,"onUpdate:currentPage":l[5]||(l[5]=t=>p.page=t),"page-size":p.limit,"onUpdate:pageSize":l[6]||(l[6]=t=>p.limit=t),"page-sizes":[10,20,50,100],total:p.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),e(Q,{modelValue:b.value,"onUpdate:modelValue":l[18]||(l[18]=t=>b.value=t),title:P.value?"编辑商品":"添加商品",width:"600px"},{footer:a(()=>[f("span",he,[e(_,{onClick:l[17]||(l[17]=t=>b.value=!1)},{default:a(()=>l[27]||(l[27]=[s("取消",-1)])),_:1,__:[27]}),e(_,{type:"primary",onClick:I},{default:a(()=>l[28]||(l[28]=[s("确定",-1)])),_:1,__:[28]})])]),default:a(()=>[e(S,{ref_key:"productFormRef",ref:v,model:o,rules:T,"label-width":"100px"},{default:a(()=>[e(E,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(u,{label:"商品名称",prop:"name"},{default:a(()=>[e(g,{modelValue:o.name,"onUpdate:modelValue":l[7]||(l[7]=t=>o.name=t),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(u,{label:"品牌",prop:"brand"},{default:a(()=>[e(g,{modelValue:o.brand,"onUpdate:modelValue":l[8]||(l[8]=t=>o.brand=t),placeholder:"请输入品牌"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(u,{label:"分类",prop:"category"},{default:a(()=>[e(k,{modelValue:o.category,"onUpdate:modelValue":l[9]||(l[9]=t=>o.category=t),placeholder:"请选择分类"},{default:a(()=>[e(r,{label:"饮料",value:"饮料"}),e(r,{label:"零食",value:"零食"}),e(r,{label:"日用品",value:"日用品"}),e(r,{label:"烟酒",value:"烟酒"}),e(r,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(u,{label:"规格",prop:"specification"},{default:a(()=>[e(g,{modelValue:o.specification,"onUpdate:modelValue":l[10]||(l[10]=t=>o.specification=t),placeholder:"如：500ml"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(u,{label:"采购价",prop:"purchasePrice"},{default:a(()=>[e(U,{modelValue:o.purchasePrice,"onUpdate:modelValue":l[11]||(l[11]=t=>o.purchasePrice=t),precision:2,step:.1,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(u,{label:"零售价",prop:"retailPrice"},{default:a(()=>[e(U,{modelValue:o.retailPrice,"onUpdate:modelValue":l[12]||(l[12]=t=>o.retailPrice=t),precision:2,step:.1,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(u,{label:"库存预警",prop:"stockAlert"},{default:a(()=>[e(U,{modelValue:o.stockAlert,"onUpdate:modelValue":l[13]||(l[13]=t=>o.stockAlert=t),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(u,{label:"单位",prop:"unit"},{default:a(()=>[e(k,{modelValue:o.unit,"onUpdate:modelValue":l[14]||(l[14]=t=>o.unit=t),placeholder:"请选择单位"},{default:a(()=>[e(r,{label:"瓶",value:"瓶"}),e(r,{label:"包",value:"包"}),e(r,{label:"盒",value:"盒"}),e(r,{label:"袋",value:"袋"}),e(r,{label:"个",value:"个"}),e(r,{label:"件",value:"件"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"条形码"},{default:a(()=>[e(g,{modelValue:o.barcode,"onUpdate:modelValue":l[15]||(l[15]=t=>o.barcode=t),placeholder:"请输入条形码"},null,8,["modelValue"])]),_:1}),e(u,{label:"状态"},{default:a(()=>[e(L,{modelValue:o.status,"onUpdate:modelValue":l[16]||(l[16]=t=>o.status=t)},{default:a(()=>[e(z,{label:"active"},{default:a(()=>l[25]||(l[25]=[s("在售",-1)])),_:1,__:[25]}),e(z,{label:"inactive"},{default:a(()=>l[26]||(l[26]=[s("停售",-1)])),_:1,__:[26]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ne=H(Se,[["__scopeId","data-v-932cd7a7"]]);export{Ne as default};
